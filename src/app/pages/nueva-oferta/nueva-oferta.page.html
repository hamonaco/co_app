<ion-header no-border>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button></ion-back-button>
        </ion-buttons>
        <ion-title text-center>Nueva oferta</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>
<form [formGroup]="nuevaOferta" (ngSubmit)="publicarOferta()">
    <ion-grid fixed padding>
        <ion-row>
            <ion-col class="col-img" size="5" *ngIf="!foto">
                <ion-img class="img-col" src="/assets/fotoicon.png" (click)="takePicture()"></ion-img>
            </ion-col>
            <ion-col class="col-img" size="5" *ngIf="foto">
                <ion-img class="img-col" [src]="foto" (click)="takePicture()"></ion-img>
            </ion-col>
            <ion-col size="7">


                <ion-item class="input" lines="none">
                    <ion-label>Precio:  $</ion-label>
                    <ion-input type="number" formControlName="precio"></ion-input>
                </ion-item>

              <ion-item lines="none" class="input" margin-top="10px">
                  <ion-input disabled="true" formControlName="categoria"></ion-input>
              </ion-item>

              <ion-item lines="none" class="input" margin-top="10px">
                <ion-input placeholder="Producto" formControlName="producto"></ion-input>
              </ion-item>

            </ion-col>
        </ion-row>
      <ion-row>
            <ion-col>

              <ion-item lines="none" class="input" margin-top="10px">
                <ion-input placeholder="Marca" formControlName="marca"></ion-input>
              </ion-item>
            </ion-col>
        </ion-row>
      <ion-row>
        <ion-col>
          <ion-item lines="none" class="input" margin-top="10px">
            <ion-label>Vencimiento:</ion-label>
            <ion-datetime [ngModel]="customDate.toISOString()"
                          placeholder="Valido hasta"
                          doneText="Guardar"
                          [min]="today.toISOString()"
                          (ionChange)="cambioFecha($event)"
                          display-format="DD / MM / YYYY"
                          formControlName="fechaVenc">
            </ion-datetime>
          </ion-item>
        </ion-col>
      </ion-row>
        <ion-row>
            <ion-col size="10">
                <ion-item lines="none" class="input" margin-top="10px">
                    <ion-input placeholder="Establecimiento" formControlName="establecimiento"></ion-input>
                </ion-item>
            </ion-col>
            <ion-col size="2" *ngIf="nuevaOferta.value.localizacion.length === 0">
                <ion-button fill="clear" (click)="openRegisterModal()">
                    <ion-icon slot="icon-only" name="navigate" color="primary"></ion-icon>
                </ion-button>
            </ion-col>
            <ion-col size="2" *ngIf="nuevaOferta.value.localizacion.length !== 0">
                <ion-button fill="clear" (click)="openRegisterModal()">
                    <ion-icon slot="icon-only" name="navigate" color="success"></ion-icon>
                </ion-button>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col>
                <ion-item lines="none" class="input" margin-top="10px">
                    <ion-input placeholder="Descripcion" formControlName="descripcion"></ion-input>
                </ion-item>
            </ion-col>
        </ion-row>

        <ion-row class="top-30">
            <ion-col>
                <ion-button class="top-20" shape="round" expand="full" [disabled]="!nuevaOferta.valid" fill="solid" color="medium" type="submit">
                    Publicar
                </ion-button>
            </ion-col>
            <ion-col>
                <ion-button class="top-20" shape="round" expand="full" fill="solid" color="tertiary" (click)="goBack()">Cancelar
                </ion-button>
            </ion-col>
        </ion-row>
    </ion-grid>
</form>
</ion-content>
