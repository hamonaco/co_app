{"version":3,"sources":["./src/app/pages/nueva-oferta/nueva-oferta.page.html","./src/app/pages/nueva-oferta/nueva-oferta-routing.module.ts","./src/app/pages/nueva-oferta/nueva-oferta.module.ts","./src/app/pages/nueva-oferta/nueva-oferta.page.scss","./src/app/pages/nueva-oferta/nueva-oferta.page.ts","./src/app/services/location.service.ts"],"names":[],"mappings":"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","file":"pages-nueva-oferta-nueva-oferta-module-es5.js","sourcesContent":["module.exports = \"<ion-header no-border>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button></ion-back-button>\\n        </ion-buttons>\\n        <ion-title text-center>Nueva oferta</ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n<form [formGroup]=\\\"nuevaOferta\\\" (ngSubmit)=\\\"publicarOferta()\\\">\\n    <ion-grid fixed padding>\\n        <ion-row>\\n            <ion-col class=\\\"col-img\\\" size=\\\"5\\\" *ngIf=\\\"!foto\\\">\\n                <ion-img class=\\\"img-col\\\" src=\\\"/assets/fotoicon.png\\\" (click)=\\\"takePicture()\\\"></ion-img>\\n            </ion-col>\\n            <ion-col class=\\\"col-img\\\" size=\\\"5\\\" *ngIf=\\\"foto\\\">\\n                <ion-img class=\\\"img-col\\\" [src]=\\\"foto\\\" (click)=\\\"takePicture()\\\"></ion-img>\\n            </ion-col>\\n            <ion-col size=\\\"7\\\">\\n\\n\\n                <ion-item class=\\\"input\\\" lines=\\\"none\\\">\\n                    <ion-label>Precio:  $</ion-label>\\n                    <ion-input inputmode=\\\"decimal\\\" placeholder=\\\"0.00\\\" formControlName=\\\"precio\\\"></ion-input>\\n                </ion-item>\\n\\n              <ion-item lines=\\\"none\\\" class=\\\"input\\\" margin-top=\\\"10px\\\">\\n                  <ion-input disabled=\\\"true\\\" formControlName=\\\"categoria\\\"></ion-input>\\n              </ion-item>\\n\\n              <ion-item lines=\\\"none\\\" class=\\\"input\\\" margin-top=\\\"10px\\\">\\n                <ion-input placeholder=\\\"Producto\\\" formControlName=\\\"producto\\\"></ion-input>\\n              </ion-item>\\n\\n            </ion-col>\\n        </ion-row>\\n      <ion-row>\\n            <ion-col>\\n\\n              <ion-item lines=\\\"none\\\" class=\\\"input\\\" margin-top=\\\"10px\\\">\\n                <ion-input placeholder=\\\"Marca\\\" formControlName=\\\"marca\\\"></ion-input>\\n              </ion-item>\\n            </ion-col>\\n        </ion-row>\\n      <ion-row>\\n        <ion-col>\\n          <ion-item lines=\\\"none\\\" class=\\\"input\\\" margin-top=\\\"10px\\\">\\n            <ion-label>Vencimiento:</ion-label>\\n            <ion-datetime [ngModel]=\\\"customDate.toISOString()\\\"\\n                          placeholder=\\\"Valido hasta\\\"\\n                          doneText=\\\"Guardar\\\"\\n                          [min]=\\\"today.toISOString()\\\"\\n                          (ionChange)=\\\"cambioFecha($event)\\\"\\n                          display-format=\\\"DD / MM / YYYY\\\"\\n                          formControlName=\\\"fechaVenc\\\">\\n            </ion-datetime>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n        <ion-row>\\n            <ion-col size=\\\"10\\\">\\n                <ion-item lines=\\\"none\\\" class=\\\"input\\\" margin-top=\\\"10px\\\">\\n                    <ion-input placeholder=\\\"Establecimiento\\\" formControlName=\\\"establecimiento\\\"></ion-input>\\n                </ion-item>\\n            </ion-col>\\n            <ion-col size=\\\"2\\\" *ngIf=\\\"nuevaOferta.value.localizacion.length === 0\\\">\\n                <ion-button fill=\\\"clear\\\" (click)=\\\"openRegisterModal()\\\">\\n                    <ion-icon slot=\\\"icon-only\\\" name=\\\"navigate\\\" color=\\\"primary\\\"></ion-icon>\\n                </ion-button>\\n            </ion-col>\\n            <ion-col size=\\\"2\\\" *ngIf=\\\"nuevaOferta.value.localizacion.length !== 0\\\">\\n                <ion-button fill=\\\"clear\\\" (click)=\\\"openRegisterModal()\\\">\\n                    <ion-icon slot=\\\"icon-only\\\" name=\\\"navigate\\\" color=\\\"success\\\"></ion-icon>\\n                </ion-button>\\n            </ion-col>\\n        </ion-row>\\n        <ion-row>\\n            <ion-col>\\n                <ion-item lines=\\\"none\\\" class=\\\"input\\\" margin-top=\\\"10px\\\">\\n                    <ion-input placeholder=\\\"Descripcion\\\" formControlName=\\\"descripcion\\\"></ion-input>\\n                </ion-item>\\n            </ion-col>\\n        </ion-row>\\n\\n        <ion-row class=\\\"top-30\\\">\\n            <ion-col>\\n                <ion-button class=\\\"top-20\\\" shape=\\\"round\\\" expand=\\\"full\\\" [disabled]=\\\"!nuevaOferta.valid\\\" fill=\\\"solid\\\" color=\\\"medium\\\" type=\\\"submit\\\">\\n                    Publicar\\n                </ion-button>\\n            </ion-col>\\n            <ion-col>\\n                <ion-button class=\\\"top-20\\\" shape=\\\"round\\\" expand=\\\"full\\\" fill=\\\"solid\\\" color=\\\"tertiary\\\" (click)=\\\"goBack()\\\">Cancelar\\n                </ion-button>\\n            </ion-col>\\n        </ion-row>\\n    </ion-grid>\\n</form>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NuevaOfertaPage } from './nueva-oferta.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NuevaOfertaPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NuevaOfertaPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NuevaOfertaPageRoutingModule } from './nueva-oferta-routing.module';\n\nimport { NuevaOfertaPage } from './nueva-oferta.page';\nimport {LocalizacionPage} from '../localizacion/localizacion.page';\nimport {LocalizacionPageModule} from '../localizacion/localizacion.module';\n\n@NgModule({\n  entryComponents:[LocalizacionPage],\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    NuevaOfertaPageRoutingModule,\n    ReactiveFormsModule,\n    LocalizacionPageModule\n  ],\n  declarations: [NuevaOfertaPage]\n})\nexport class NuevaOfertaPageModule {}\n","module.exports = \".col-img {\\n  height: 200px;\\n  border: 1px grey;\\n  background-color: grey;\\n  border-radius: 24px;\\n}\\n\\n.img-col {\\n  width: 70%;\\n  height: 70%;\\n  /* display: grid; */\\n  margin-left: 15%;\\n  margin-top: 20%;\\n}\\n\\n.top-30 {\\n  margin-top: 10%;\\n}\\n\\n.input {\\n  margin-top: 2px;\\n  margin-bottom: 26px;\\n  border: 1px solid #989aa2;\\n  border-radius: 24px;\\n}\\n\\n.native-input sc-ion-input-ios {\\n  margin-left: 10% !important;\\n}\\n\\nion-select {\\n  max-width: 70% !important;\\n  padding-left: 0px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9rYW5vL0NhemFuZG9PZmVydGFzL2NvX2FwcC9zcmMvYXBwL3BhZ2VzL251ZXZhLW9mZXJ0YS9udWV2YS1vZmVydGEucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9udWV2YS1vZmVydGEvbnVldmEtb2ZlcnRhLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7RUFDQSxnQkFBQTtFQUNBLHNCQUFBO0VBQ0EsbUJBQUE7QUNDRjs7QURDQTtFQUNFLFVBQUE7RUFDQSxXQUFBO0VBQ0EsbUJBQUE7RUFDQSxnQkFBQTtFQUNBLGVBQUE7QUNFRjs7QURDQTtFQUNFLGVBQUE7QUNFRjs7QURDQTtFQUNFLGVBQUE7RUFDQSxtQkFBQTtFQUNBLHlCQUFBO0VBQ0EsbUJBQUE7QUNFRjs7QURDQTtFQUNFLDJCQUFBO0FDRUY7O0FEQ0E7RUFDRSx5QkFBQTtFQUNBLGlCQUFBO0FDRUYiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9udWV2YS1vZmVydGEvbnVldmEtb2ZlcnRhLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb2wtaW1ne1xuICBoZWlnaHQ6IDIwMHB4O1xuICBib3JkZXI6IDFweCBncmV5O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBncmV5O1xuICBib3JkZXItcmFkaXVzOiAyNHB4O1xufVxuLmltZy1jb2wge1xuICB3aWR0aDogNzAlO1xuICBoZWlnaHQ6IDcwJTtcbiAgLyogZGlzcGxheTogZ3JpZDsgKi9cbiAgbWFyZ2luLWxlZnQ6IDE1JTtcbiAgbWFyZ2luLXRvcDogMjAlO1xufVxuXG4udG9wLTMwe1xuICBtYXJnaW4tdG9wOiAxMCU7XG59XG5cbi5pbnB1dHtcbiAgbWFyZ2luLXRvcDogMnB4O1xuICBtYXJnaW4tYm90dG9tOiAyNnB4O1xuICBib3JkZXI6IDFweCBzb2xpZCAjOTg5YWEyO1xuICBib3JkZXItcmFkaXVzOiAyNHB4O1xufVxuXG4ubmF0aXZlLWlucHV0IHNjLWlvbi1pbnB1dC1pb3N7XG4gIG1hcmdpbi1sZWZ0OiAxMCUgIWltcG9ydGFudDtcbn1cblxuaW9uLXNlbGVjdHtcbiAgbWF4LXdpZHRoOiA3MCUgIWltcG9ydGFudDtcbiAgcGFkZGluZy1sZWZ0OiAwcHg7XG59XG4iLCIuY29sLWltZyB7XG4gIGhlaWdodDogMjAwcHg7XG4gIGJvcmRlcjogMXB4IGdyZXk7XG4gIGJhY2tncm91bmQtY29sb3I6IGdyZXk7XG4gIGJvcmRlci1yYWRpdXM6IDI0cHg7XG59XG5cbi5pbWctY29sIHtcbiAgd2lkdGg6IDcwJTtcbiAgaGVpZ2h0OiA3MCU7XG4gIC8qIGRpc3BsYXk6IGdyaWQ7ICovXG4gIG1hcmdpbi1sZWZ0OiAxNSU7XG4gIG1hcmdpbi10b3A6IDIwJTtcbn1cblxuLnRvcC0zMCB7XG4gIG1hcmdpbi10b3A6IDEwJTtcbn1cblxuLmlucHV0IHtcbiAgbWFyZ2luLXRvcDogMnB4O1xuICBtYXJnaW4tYm90dG9tOiAyNnB4O1xuICBib3JkZXI6IDFweCBzb2xpZCAjOTg5YWEyO1xuICBib3JkZXItcmFkaXVzOiAyNHB4O1xufVxuXG4ubmF0aXZlLWlucHV0IHNjLWlvbi1pbnB1dC1pb3Mge1xuICBtYXJnaW4tbGVmdDogMTAlICFpbXBvcnRhbnQ7XG59XG5cbmlvbi1zZWxlY3Qge1xuICBtYXgtd2lkdGg6IDcwJSAhaW1wb3J0YW50O1xuICBwYWRkaW5nLWxlZnQ6IDBweDtcbn0iXX0= */\"","import {Component, OnInit} from '@angular/core';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {LoadingController, ModalController, NavController} from '@ionic/angular';\nimport {Producto} from '../../models/producto';\nimport {LocalizacionPage} from '../localizacion/localizacion.page';\nimport {LocationService} from '../../services/location.service';\nimport {Nav} from '../../services/nav.service';\nimport {HomeOption} from '../../models/homeOption';\nimport {DataService} from '../../services/data.service';\nimport {CameraResultType, CameraSource, Plugins} from '@capacitor/core';\nimport {SafeResourceUrl, DomSanitizer} from '@angular/platform-browser';\nimport {Geolocation} from '@ionic-native/geolocation/ngx';\n\nconst { Camera } = Plugins;\n\n\n@Component({\n  selector: 'app-nueva-oferta',\n  templateUrl: './nueva-oferta.page.html',\n  styleUrls: ['./nueva-oferta.page.scss'],\n})\nexport class NuevaOfertaPage implements OnInit {\n  customPickerOptions;\n  oferta: Producto;\n  categoria : HomeOption;\n  customDate: Date = new Date();\n  nuevaOferta: FormGroup;\n  foto: any;\n  today: Date = new Date();\n  coords: any;\n\n\n  constructor(private domSanitazer: DomSanitizer,private geolocation: Geolocation, private nav: Nav, private formBuilder: FormBuilder, private navController: NavController, private modalController: ModalController, private locationService:LocationService, private loadingController:LoadingController, private dataService: DataService) {\n    this.nuevaOferta = this.formBuilder.group({\n      precio: ['', Validators.required],\n      categoria: [this.nav.get().nombre, Validators.required],\n      producto: ['', Validators.required],\n      marca: ['', Validators.required],\n      fechaVenc: ['',Validators.required],\n      establecimiento: ['', Validators.required],\n      descripcion: [''],\n      localizacion: ['',Validators.required]\n    });\n  }\n\n  ngOnInit() {\n    this.categoria = this.nav.get();\n\n  }\n\n  async takePicture() {\n    try {\n      const result = await Camera.getPhoto({\n        quality: 75,\n        allowEditing: false,\n        resultType: CameraResultType.Uri\n      });\n      this.foto = result.webPath;\n      console.log(this.foto);\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  goBack(){\n    this.navController.navigateBack('familia')\n  }\n\n  cambioFecha(event){\n    this.nuevaOferta.controls['fechaVenc'].setValue(event.detail.value)\n  }\n\n  async openRegisterModal() {\n    let loading = await this.loadingController.create({\n      message: 'Obteniendo la ubicacion...',\n      spinner: 'crescent'\n    });\n    await loading.present();\n\n    await this.geolocation.getCurrentPosition().then((resp)=>{\n      const coords = {lat:`${resp.coords.latitude}`,lng:`${resp.coords.longitude}`};\n      this.coords = coords;\n    });\n\n    const modal = await this.modalController.create({\n        component: LocalizacionPage,\n        componentProps:{\n          localizacion: {lat: this.coords.lat,lng: this.coords.lng, dragable:true}\n        }\n      });\n      await modal.present();\n\n      loading.dismiss();\n\n      const data = await modal.onWillDismiss();\n      console.log(data);\n\n      this.nuevaOferta.controls['localizacion'].setValue(data.data);\n\n  }\n\n  async publicarOferta() {\n    let loading = await this.loadingController.create({\n      message: 'Publicando oferta',\n      spinner: 'crescent'\n    });\n    await loading.present();\n    this.oferta = {\n      foto: null,\n      categoria: this.categoria.id,\n      marca: this.nuevaOferta.value.marca,\n      establecimiento: this.nuevaOferta.value.establecimiento,\n      validez: this.nuevaOferta.value.fechaVenc,\n      fecha_pub: new Date().toISOString(),\n      estado: null,\n      precio: this.nuevaOferta.value.precio,\n      producto: this.nuevaOferta.value.producto,\n      descripcion: this.nuevaOferta.value.descripcion,\n      //ubicaciones: {lat: this.nuevaOferta.value.localizacion.lat, long: this.nuevaOferta.value.localizacion.lng}\n      lat: this.nuevaOferta.value.localizacion.lat,\n      long: this.nuevaOferta.value.localizacion.lng\n\n    };\n    console.log(this.oferta);\n    this.dataService.postOferta(this.oferta).then(res => {\n      console.log(res);\n      this.navController.navigateBack('/home');\n    });\n    loading.dismiss();\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport {Plugins} from '@capacitor/core';\nimport {Geolocation} from '@ionic-native/geolocation/ngx';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LocationService {\n\n  constructor(private geolocation: Geolocation) { }\n\n  async getCurrentPosition() {\n   await this.geolocation.getCurrentPosition({timeout:10000, enableHighAccuracy: false, maximumAge: 7500}).then((resp) => {\n       console.log(resp);\n       return {lat: resp.coords.latitude, lng: resp.coords.longitude}\n     }).catch((error) => {\n       console.log('Error getting location', error);\n       return error;\n     });\n\n  }\n}\n"],"sourceRoot":""}